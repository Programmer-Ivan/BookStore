(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73598d2a"],{"0cb6":function(t,r,e){},"159b":function(t,r,e){var a=e("da84"),n=e("fdbc"),i=e("17c2"),s=e("9112");for(var o in n){var c=a[o],u=c&&c.prototype;if(u&&u.forEach!==i)try{s(u,"forEach",i)}catch(l){u.forEach=i}}},"17c2":function(t,r,e){"use strict";var a=e("b727").forEach,n=e("a640"),i=n("forEach");t.exports=i?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},"34eb":function(t,r){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABk0lEQVRoQ+2Z3UYFURSA1/c8dVcv0H23iYiIiIiIiH5ERMQhIiIi0kPUfd3Vk/QAO5s5HJmzW2f/tbZm7saZGd+31p519lqDNH7QOL8MAn+dwSED/y4DzrkTEVkWkS8ReQX8efRRdQl18McTtJ/AfDS9SL0q1APvud+BRfMCU+A996n5JRSAPwLOUqLv7y36DgTgD4HzVPiiAgH4A+AiB3wxgQD8PnCZC76IgHPOl8m+2r4HXOWEzy4QgN8FRrnhswoE4HeA6xLw2QQC8NvATSn4LAIB+C3gtiR8skCg2mwCd6XhkwQC8BvAfQ34aIEA/DrwUAs+SiAAvwY81oSPFfgQkbkfoKvAU234WIE3EVloWcBvEya7qrFLG0vI0zb9Eo/D3XQZVUjY/yNTSNjfSigk7G/mFBL2t9MKCfsNjULCfkupkLDf1Csk7I9VFBL2B1sKCfujRYWE/eHuLxLtfB+Ysot9AZZSGqGi0+k+sG4Ms9L99mz++0BKdDX3Vs+ABmqWawaBWaJV4tohAyWiOsszvwGAjbUxED2S5gAAAABJRU5ErkJggg=="},"4d62":function(t,r,e){},"4fb5":function(t,r,e){"use strict";e("4d62")},"5a4f":function(t,r,e){"use strict";e.r(r);var a=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"order-detail-box"},[a("nav-bar",{attrs:{bg:"rgb(255, 129, 152)",color:"#fff"}},[a("div",{attrs:{slot:"left"},slot:"left"},[a("img",{staticClass:"left-img",attrs:{src:e("34eb"),alt:""}})]),a("div",{attrs:{slot:"center"},slot:"center"},[t._v("订单状态")])]),a("div",{staticClass:"order-status"},[a("div",{staticClass:"status-item"},[a("label",[t._v("订单状态：")]),a("span",[t._v(t._s(t.stateString))])]),a("div",{staticClass:"status-item"},[a("label",[t._v("订单编号：")]),a("span",[t._v(t._s(t.state.order_no))])]),a("div",{staticClass:"status-item"},[a("label",[t._v("下单时间：")]),a("span",[t._v(t._s(t.state.created_at))])]),"1"==t.state.status?a("van-button",{staticStyle:{"margin-bottom":"10px"},attrs:{color:"#1baeae",block:""},on:{click:t.payorder}},[t._v("去支付 ")]):t._e(),"2"==t.state.status?a("van-button",{attrs:{block:""},on:{click:t.handleConfirmOrder}},[t._v("确认订单")]):t._e()],1),a("div",{staticClass:"order-price"},[a("div",{staticClass:"price-item"},[a("label",[t._v("商品金额：")]),a("span",[t._v("¥"+t._s(t.showPrice))])]),t._m(0)]),t._l(this.state.goods,(function(t){return a("van-card",{key:t.id,attrs:{num:t.num,price:t.goods.price,desc:"全场包邮",title:t.goods.title,thumb:t.goods.cover_url}})})),a("div",{staticStyle:{width:"100%",height:"50px"}}),a("van-popup",{style:{height:"30%"},attrs:{position:"bottom",closeable:""},model:{value:t.showPay,callback:function(r){t.showPay=r},expression:"showPay"}},[a("div",{style:{width:"90%",margin:"0 auto"}},[a("van-grid",{attrs:{border:!1,"column-num":2}},[a("van-grid-item",{attrs:{text:"支付宝"}},[t._v(" 支付宝二维码"),a("br"),a("van-image",{attrs:{width:"150",height:"150",src:t.aliyun}})],1),a("van-grid-item",{attrs:{text:"微信支付"}},[t._v(" 微信二维码"),a("br"),a("van-image",{attrs:{width:"150",height:"150",src:t.wechat}})],1)],1)],1)])],2)},n=[function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"price-item"},[e("label",[t._v("配送方式：")]),e("span",[t._v("普通快递")])])}],i=(e("159b"),e("7fae")),s=e("e05b"),o=e("2241"),c=e("d399"),u={name:"OrderDetail",components:{NavBar:i["a"]},data:function(){return{showPay:!1,orderID:0,state:{goods:[],status:""},aliyun:"",wechat:"",orderstate:["","未支付","支付完成","等待发货","确认收货","已过期"]}},methods:{init:function(){var t=this;this.orderID=this.$route.query.id,Object(s["c"])(this.$route.query.id).then((function(r){t.state=r,t.state.goods=r.orderDetails.data}))},payorder:function(){var t=this;this.showPay=!0,Object(s["e"])(this.orderID,{type:"aliyun"}).then((function(r){t.aliyun=r.qr_code_url,t.wechat=r.qr_code_url}));var r=setInterval((function(){Object(s["f"])(t.orderID).then((function(e){"2"==e&&(clearInterval(r),t.showPay=!1,t.$router.push({path:"/orderdetail",query:{id:t.orderID}}))}))}),2e3)},handleConfirmOrder:function(){var t=this;o["a"].confirm({title:"是否确认订单"}).then((function(){Object(s["a"])(t.orderID).then((function(r){Object(c["a"])("确认成功"),t.init()}))})).catch((function(){}))}},computed:{showPrice:function(){var t=0;return this.state.goods.forEach((function(r){t+=parseInt(r.num)*parseFloat(r.price)})),t},stateString:function(){return this.orderstate[this.state.status]}},mounted:function(){c["a"].loading({message:"加载中...",forbidClick:!0}),this.init(),c["a"].clear()},activated:function(){this.init()}},l=u,d=(e("f3e1"),e("2877")),f=Object(d["a"])(l,a,n,!1,null,"3ee955c7",null);r["default"]=f.exports},"65f0":function(t,r,e){var a=e("861d"),n=e("e8b5"),i=e("b622"),s=i("species");t.exports=function(t,r){var e;return n(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)?a(e)&&(e=e[s],null===e&&(e=void 0)):e=void 0),new(void 0===e?Array:e)(0===r?0:r)}},"7fae":function(t,r,e){"use strict";var a=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"nav-bar",style:t.bgcolor},[e("div",{staticClass:"left",on:{click:t.itemClick}},[t._t("left")],2),e("div",{staticClass:"center"},[t._t("center")],2),e("div",{staticClass:"right"},[t._t("right")],2)])},n=[],i={name:"NavBar",props:{bg:{type:String,default:"blue"},color:{type:String,default:"blue"}},computed:{bgcolor:function(){return this.$route?{background:this.bg,color:this.color}:{}}},methods:{itemClick:function(){this.$router.go(-1)}}},s=i,o=(e("4fb5"),e("2877")),c=Object(o["a"])(s,a,n,!1,null,"342e64f7",null);r["a"]=c.exports},a640:function(t,r,e){"use strict";var a=e("d039");t.exports=function(t,r){var e=[][t];return!!e&&a((function(){e.call(null,r||function(){throw 1},1)}))}},b727:function(t,r,e){var a=e("0366"),n=e("44ad"),i=e("7b0b"),s=e("50c4"),o=e("65f0"),c=[].push,u=function(t){var r=1==t,e=2==t,u=3==t,l=4==t,d=6==t,f=7==t,v=5==t||d;return function(h,b,p,g){for(var m,A,y=i(h),w=n(y),_=a(b,p,3),C=s(w.length),k=0,E=g||o,O=r?E(h,C):e||f?E(h,0):void 0;C>k;k++)if((v||k in w)&&(m=w[k],A=_(m,k,y),t))if(r)O[k]=A;else if(A)switch(t){case 3:return!0;case 5:return m;case 6:return k;case 2:c.call(O,m)}else switch(t){case 4:return!1;case 7:c.call(O,m)}return d?-1:u||l?l:O}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},e05b:function(t,r,e){"use strict";e.d(r,"b",(function(){return n})),e.d(r,"d",(function(){return i})),e.d(r,"e",(function(){return s})),e.d(r,"f",(function(){return o})),e.d(r,"c",(function(){return c})),e.d(r,"a",(function(){return u}));var a=e("1bab");function n(t){return Object(a["a"])({url:"/api/orders",method:"post",params:t})}function i(){return Object(a["a"])({url:"/api/orders/preview"})}function s(t,r){return Object(a["a"])({url:"/api/orders/".concat(t,"/pay"),params:r})}function o(t){return Object(a["a"])({url:"/api/orders/".concat(t,"/status")})}function c(t){return Object(a["a"])({url:"/api/orders/".concat(t),params:{include:"user,orderDetails.goods"}})}function u(t){return Object(a["a"])({url:"/api/orders/".concat(t,"/confirm"),method:"patch"})}},e8b5:function(t,r,e){var a=e("c6b6");t.exports=Array.isArray||function(t){return"Array"==a(t)}},f3e1:function(t,r,e){"use strict";e("0cb6")}}]);
//# sourceMappingURL=chunk-73598d2a.e0393c1e.js.map