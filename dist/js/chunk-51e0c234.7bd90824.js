(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51e0c234"],{"159b":function(t,r,e){var a=e("da84"),s=e("fdbc"),n=e("17c2"),i=e("9112");for(var o in s){var c=a[o],u=c&&c.prototype;if(u&&u.forEach!==n)try{i(u,"forEach",n)}catch(d){u.forEach=n}}},"17c2":function(t,r,e){"use strict";var a=e("b727").forEach,s=e("a640"),n=s("forEach");t.exports=n?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,r,e){var a=e("d039"),s=e("b622"),n=e("2d00"),i=s("species");t.exports=function(t){return n>=51||!a((function(){var r=[],e=r.constructor={};return e[i]=function(){return{foo:1}},1!==r[t](Boolean).foo}))}},"1ee2":function(t,r,e){"use strict";e("226d")},"226d":function(t,r,e){},"34eb":function(t,r){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABk0lEQVRoQ+2Z3UYFURSA1/c8dVcv0H23iYiIiIiIiH5ERMQhIiIi0kPUfd3Vk/QAO5s5HJmzW2f/tbZm7saZGd+31p519lqDNH7QOL8MAn+dwSED/y4DzrkTEVkWkS8ReQX8efRRdQl18McTtJ/AfDS9SL0q1APvud+BRfMCU+A996n5JRSAPwLOUqLv7y36DgTgD4HzVPiiAgH4A+AiB3wxgQD8PnCZC76IgHPOl8m+2r4HXOWEzy4QgN8FRrnhswoE4HeA6xLw2QQC8NvATSn4LAIB+C3gtiR8skCg2mwCd6XhkwQC8BvAfQ34aIEA/DrwUAs+SiAAvwY81oSPFfgQkbkfoKvAU234WIE3EVloWcBvEya7qrFLG0vI0zb9Eo/D3XQZVUjY/yNTSNjfSigk7G/mFBL2t9MKCfsNjULCfkupkLDf1Csk7I9VFBL2B1sKCfujRYWE/eHuLxLtfB+Ysot9AZZSGqGi0+k+sG4Ms9L99mz++0BKdDX3Vs+ABmqWawaBWaJV4tohAyWiOsszvwGAjbUxED2S5gAAAABJRU5ErkJggg=="},"4d62":function(t,r,e){},"4de4":function(t,r,e){"use strict";var a=e("23e7"),s=e("b727").filter,n=e("1dde"),i=n("filter");a({target:"Array",proto:!0,forced:!i},{filter:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},"4fb5":function(t,r,e){"use strict";e("4d62")},"65f0":function(t,r,e){var a=e("861d"),s=e("e8b5"),n=e("b622"),i=n("species");t.exports=function(t,r){var e;return s(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!s(e.prototype)?a(e)&&(e=e[i],null===e&&(e=void 0)):e=void 0),new(void 0===e?Array:e)(0===r?0:r)}},"7fae":function(t,r,e){"use strict";var a=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"nav-bar",style:t.bgcolor},[e("div",{staticClass:"left",on:{click:t.itemClick}},[t._t("left")],2),e("div",{staticClass:"center"},[t._t("center")],2),e("div",{staticClass:"right"},[t._t("right")],2)])},s=[],n={name:"NavBar",props:{bg:{type:String,default:"blue"},color:{type:String,default:"blue"}},computed:{bgcolor:function(){return this.$route?{background:this.bg,color:this.color}:{}}},methods:{itemClick:function(){this.$router.go(-1)}}},i=n,o=(e("4fb5"),e("2877")),c=Object(o["a"])(i,a,s,!1,null,"342e64f7",null);r["a"]=c.exports},a38c:function(t,r,e){"use strict";e.r(r);var a=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"create-order"},[a("nav-bar",{attrs:{bg:"rgb(255, 129, 152)",color:"#fff"}},[a("div",{attrs:{slot:"left"},slot:"left"},[a("img",{staticClass:"left-img",attrs:{src:e("34eb"),alt:""}})]),a("div",{attrs:{slot:"center"},slot:"center"},[t._v("图书兄弟-订单预览")])]),a("div",{staticClass:"address-wrap"},[a("div",{staticClass:"name",on:{click:t.goTo}},[a("span",[t._v("联系人："+t._s(t.address.name))]),a("span",{staticStyle:{"margin-left":"50px"}},[t._v("电话："+t._s(t.address.phone))])]),a("div",{staticClass:"address"},[t._v(" "+t._s(t.address.province)+" "+t._s(t.address.city)+" "+t._s(t.address.county)+" "+t._s(t.address.address)+" ")]),a("van-icon",{staticClass:"arrow",attrs:{name:"arrow"}})],1),a("div",{staticClass:"good"},t._l(t.carts,(function(r){return a("div",{staticClass:"good-item"},[a("div",{staticClass:"good-img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:r.goods.cover_url,expression:"item.goods.cover_url"}],attrs:{alt:""}})]),a("div",{staticClass:"good-desc"},[a("div",{staticClass:"good-title"},[a("span",[t._v(t._s(r.goods.title))]),a("span",[t._v("x"+t._s(r.num))])]),a("div",{staticClass:"good-btn"},[a("div",{staticClass:"price"},[a("small",[t._v("¥")]),t._v(t._s(r.goods.price+".00"))])])])])})),0),a("van-submit-bar",{staticClass:"submit-all",attrs:{price:100*t.showPrice,"button-text":"生成订单"},on:{submit:t.createorder}},[t._v(" 商品金额 ")]),a("van-popup",{style:{height:"30%"},attrs:{position:"bottom",closeable:""},on:{close:t.closePopup},model:{value:t.showPay,callback:function(r){t.showPay=r},expression:"showPay"}},[a("van-grid",{attrs:{border:!1,"column-num":2}},[a("van-grid-item",[t._v(" 支付宝二维码"),a("br"),a("van-image",{attrs:{width:"150",height:"150",src:t.aliyun}})],1),a("van-grid-item",[t._v(" 微信二维码"),a("br"),a("van-image",{attrs:{width:"150",height:"150",src:t.wechat}})],1)],1)],1)],1)},s=[],n=(e("159b"),e("4de4"),e("7fae")),i=e("e05b"),o=e("d399"),c={name:"CreateOrder",components:{NavBar:n["a"]},data:function(){return{showPay:!1,address:{},carts:[],show:!1,createoder:{},aliyun:"",wechat:""}},computed:{showPrice:function(){var t=0;return this.carts.forEach((function(r){t+=parseInt(r.num)*parseFloat(r.goods.price)})),t}},mounted:function(){this.init()},activated:function(){this.init()},methods:{init:function(){var t=this;Object(i["d"])().then((function(r){var e=r.address.filter((function(t){return"1"==t.is_default}));0==e.length?t.address="还没有设置默认地址，请选择或填写地址信息":t.address=e[0],t.carts=r.carts}))},goTo:function(){this.$router.push("/address")},createorder:function(){var t=this,r={address_id:this.address.id};Object(i["b"])(r).then((function(r){Object(o["a"])("创建定单成功"),t.$store.dispatch("updata"),t.showPay=!0,t.createoder={id:r.id},Object(i["e"])(t.createoder.id,{type:"aliyun"}).then((function(r){t.aliyun=r.qr_code_url,t.wechat=r.qr_code_url}));var e=setInterval((function(){Object(i["f"])(t.createoder.id).then((function(r){"2"==r&&(clearInterval(e),t.$router.push({path:"/orderdetail",query:{id:t.createoder.id}}))}))}),2e3)}))},closePopup:function(){this.$router.push({path:"/orderdetail",query:{id:this.createoder.id}})}}},u=c,d=(e("1ee2"),e("2877")),l=Object(d["a"])(u,a,s,!1,null,"164d0a00",null);r["default"]=l.exports},a640:function(t,r,e){"use strict";var a=e("d039");t.exports=function(t,r){var e=[][t];return!!e&&a((function(){e.call(null,r||function(){throw 1},1)}))}},b727:function(t,r,e){var a=e("0366"),s=e("44ad"),n=e("7b0b"),i=e("50c4"),o=e("65f0"),c=[].push,u=function(t){var r=1==t,e=2==t,u=3==t,d=4==t,l=6==t,f=7==t,v=5==t||l;return function(p,h,b,g){for(var m,A,w=n(p),y=s(w),_=a(h,b,3),C=i(y.length),k=0,E=g||o,O=r?E(p,C):e||f?E(p,0):void 0;C>k;k++)if((v||k in y)&&(m=y[k],A=_(m,k,w),t))if(r)O[k]=A;else if(A)switch(t){case 3:return!0;case 5:return m;case 6:return k;case 2:c.call(O,m)}else switch(t){case 4:return!1;case 7:c.call(O,m)}return l?-1:u||d?d:O}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},e05b:function(t,r,e){"use strict";e.d(r,"b",(function(){return s})),e.d(r,"d",(function(){return n})),e.d(r,"e",(function(){return i})),e.d(r,"f",(function(){return o})),e.d(r,"c",(function(){return c})),e.d(r,"a",(function(){return u}));var a=e("1bab");function s(t){return Object(a["a"])({url:"/api/orders",method:"post",params:t})}function n(){return Object(a["a"])({url:"/api/orders/preview"})}function i(t,r){return Object(a["a"])({url:"/api/orders/".concat(t,"/pay"),params:r})}function o(t){return Object(a["a"])({url:"/api/orders/".concat(t,"/status")})}function c(t){return Object(a["a"])({url:"/api/orders/".concat(t),params:{include:"user,orderDetails.goods"}})}function u(t){return Object(a["a"])({url:"/api/orders/".concat(t,"/confirm"),method:"patch"})}},e8b5:function(t,r,e){var a=e("c6b6");t.exports=Array.isArray||function(t){return"Array"==a(t)}}}]);
//# sourceMappingURL=chunk-51e0c234.7bd90824.js.map