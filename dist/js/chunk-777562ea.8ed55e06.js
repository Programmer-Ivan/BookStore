(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-777562ea"],{"34eb":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABk0lEQVRoQ+2Z3UYFURSA1/c8dVcv0H23iYiIiIiIiH5ERMQhIiIi0kPUfd3Vk/QAO5s5HJmzW2f/tbZm7saZGd+31p519lqDNH7QOL8MAn+dwSED/y4DzrkTEVkWkS8ReQX8efRRdQl18McTtJ/AfDS9SL0q1APvud+BRfMCU+A996n5JRSAPwLOUqLv7y36DgTgD4HzVPiiAgH4A+AiB3wxgQD8PnCZC76IgHPOl8m+2r4HXOWEzy4QgN8FRrnhswoE4HeA6xLw2QQC8NvATSn4LAIB+C3gtiR8skCg2mwCd6XhkwQC8BvAfQ34aIEA/DrwUAs+SiAAvwY81oSPFfgQkbkfoKvAU234WIE3EVloWcBvEya7qrFLG0vI0zb9Eo/D3XQZVUjY/yNTSNjfSigk7G/mFBL2t9MKCfsNjULCfkupkLDf1Csk7I9VFBL2B1sKCfujRYWE/eHuLxLtfB+Ysot9AZZSGqGi0+k+sG4Ms9L99mz++0BKdDX3Vs+ABmqWawaBWaJV4tohAyWiOsszvwGAjbUxED2S5gAAAABJRU5ErkJggg=="},d894:function(t,e,i){"use strict";i("ff0f")},eda5:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"category"},[a("nav-bar",{attrs:{bg:"rgb(255, 129, 152)",color:"#fff"}},[a("div",{attrs:{slot:"left"},slot:"left"},[a("img",{staticClass:"left-img",attrs:{src:i("34eb"),alt:""}})]),a("div",{attrs:{slot:"center"},slot:"center"},[t._v("图书兄弟-分类")])]),a("div",{attrs:{id:"mainbox"}},[a("div",{staticClass:"ordertab"},[a("van-tabs",{on:{click:t.tabClick},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tab",{attrs:{title:"销量排序"}}),a("van-tab",{attrs:{title:"价格排序"}}),a("van-tab",{attrs:{title:"评化排序"}})],1)],1),a("van-sidebar",{staticClass:"leftmenu",model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},[a("van-collapse",{attrs:{accordion:""},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.category,(function(e,i){return a("van-collapse-item",{key:e.id,attrs:{title:e.name,name:e.name}},t._l(e.children,(function(e){return a("van-sidebar-item",{key:e.id,attrs:{title:e.name},on:{click:function(i){return t.leftClick(e.id)}}})})),1)})),1)],1),a("Scroll",{ref:"scroll",staticClass:"goodslist",attrs:{probeTypes:3,"pull-up-load":!0},on:{scroll:t.scrollPosition,pullingUp:t.downLoad}},t._l(t.showGoods,(function(e){return a("van-card",{key:e.id,attrs:{num:e.category_id,tag:e.comments_count>=0?"流行":"标签",price:e.price,desc:e.updated_at,title:e.title,thumb:e.cover_url},on:{click:function(i){return t.itemClick(e.id)}}})})),1)],1),t.backTop?a("BackTop",{nativeOn:{click:function(e){return t.backClick.apply(null,arguments)}}}):t._e()],1)},o=[],s=i("2909"),n=i("7fae"),c=i("f8c8"),r=i("5d17"),l=i("1bab");function u(){return Object(l["a"])({url:"/api/goods"})}function d(t,e,i){return Object(l["a"])({url:"/api/goods?category_id="+e+"&page="+i+"&"+t+"=1"})}var f={name:"CateGory",components:{NavBar:n["a"],Scroll:r["a"],BackTop:c["a"]},data:function(){return{bscroll:0,active:0,activeKey:0,activeName:1,category:[],currentSort:"sales",tabs:["sales","price","comments_count"],currentId:0,goods:{sales:{page:0,list:[]},price:{page:0,list:[]},comments_count:{page:0,list:[]}},backTop:!1}},methods:{tabClick:function(t){this.currentSort=this.tabs[t],this.init(this.currentSort)},leftClick:function(t){this.currentId=t,console.log("分类"+this.currentId),console.log("排序"+this.currentSort),this.init(this.currentSort)},itemClick:function(t){this.$router.push({path:"/detail",query:{id:t}})},init:function(t){var e=this,i=this.goods[t].page+1;d(this.currentSort,this.currentId,i).then((function(i){var a;(a=e.goods[t].list).push.apply(a,Object(s["a"])(i.goods.data)),e.goods[t].page+=1,console.log(e.goods[t]),e.$refs.scroll.pullingUp()}))},downLoad:function(){this.init(this.currentSort),this.$refs.scroll.refresh()},backClick:function(){this.$refs.scroll.scrollTop(0,0,200)},scrollPosition:function(t){this.backTop=-t.y>500}},mounted:function(){var t=this;u().then((function(e){t.category=e.categories})),this.init("sales")},activated:function(){this.$refs.scroll.refresh()},computed:{showGoods:function(){return this.goods[this.currentSort].list}}},v=f,g=(i("d894"),i("2877")),p=Object(g["a"])(v,a,o,!1,null,"0be969f2",null);e["default"]=p.exports},ff0f:function(t,e,i){}}]);
//# sourceMappingURL=chunk-777562ea.8ed55e06.js.map